decision_id: agent_framework
title: "Agent Framework"
description: >
  Which agent orchestration framework to use for LLM-driven pipeline
  automation. Agents manage multi-step workflows: hyperparameter
  suggestions, experiment triage, report generation, and adaptive
  retraining triggers. The framework determines how agent state,
  tool calling, and human-in-the-loop patterns are implemented.

decision_level: L3_technology
status: active
last_updated: 2026-02-24

options:
  - option_id: langgraph
    title: "LangGraph"
    description: >
      Graph-based agent orchestration from LangChain. Supports stateful
      multi-step workflows, human-in-the-loop, and persistence.
      Partially implemented with initial agent definitions. Referenced
      as primary agent orchestrator in CLAUDE.md.
    prior_probability: 0.45
    status: resolved
    implementation_status: partial
    complements:
      - "llm_observability.langfuse"
      - "llm_observability.braintrust"
      - "llm_provider.hybrid_litellm"

  - option_id: crewai
    title: "CrewAI"
    description: >
      Multi-agent framework with role-based agent definitions. Simpler
      than LangGraph for predefined workflows. Good for team-of-agents
      patterns but less flexible for custom graph topologies.
    prior_probability: 0.20
    status: viable
    implementation_status: not_started
    constraints:
      - "Less flexible than LangGraph for custom workflows"
      - "Younger ecosystem, API stability concerns"

  - option_id: autogen
    title: "AutoGen"
    description: >
      Microsoft's multi-agent framework. Strong for conversational
      multi-agent patterns and code generation tasks. Active development
      with AutoGen Studio.
    prior_probability: 0.15
    status: viable
    implementation_status: not_started
    constraints:
      - "Heavier dependency footprint"
      - "Microsoft ecosystem alignment may not fit MONAI stack"

  - option_id: custom
    title: "Custom Agent Framework"
    description: >
      Build lightweight agents directly on LLM provider APIs with custom
      state management. Maximum control, minimum dependency, but
      significant development effort for tool calling and persistence.
    prior_probability: 0.20
    status: viable
    implementation_status: not_started
    constraints:
      - "Tool calling, state management, and persistence from scratch"
      - "No pre-built human-in-the-loop patterns"

conditional_on:
  - parent_decision_id: pipeline_orchestration
    influence_strength: strong
    conditional_table:
      - given_parent_option: hydra_scripts
        then_probabilities:
          langgraph: 0.25
          crewai: 0.15
          autogen: 0.15
          custom: 0.45
      - given_parent_option: dvc_pipelines
        then_probabilities:
          langgraph: 0.30
          crewai: 0.20
          autogen: 0.15
          custom: 0.35
      - given_parent_option: langgraph_agents
        then_probabilities:
          langgraph: 0.55
          crewai: 0.15
          autogen: 0.10
          custom: 0.20
      - given_parent_option: airflow_orchestrated
        then_probabilities:
          langgraph: 0.30
          crewai: 0.25
          autogen: 0.20
          custom: 0.25

archetype_weights:
  solo_researcher:
    probability_overrides:
      langgraph: 0.35
      crewai: 0.15
      autogen: 0.10
      custom: 0.40
    rationale: "Solo researchers may prefer lightweight custom agents over framework overhead"
  lab_group:
    probability_overrides:
      langgraph: 0.40
      crewai: 0.25
      autogen: 0.20
      custom: 0.15
    rationale: "Lab groups benefit from framework-level collaboration patterns"
  clinical_deployment:
    probability_overrides:
      langgraph: 0.45
      crewai: 0.20
      autogen: 0.15
      custom: 0.20
    rationale: "Clinical needs auditable agent state (LangGraph persistence) for compliance"

volatility:
  classification: volatile
  last_assessed: 2026-02-23
  next_review: 2026-04-23
  change_drivers:
    - "LangGraph v0.3+ API evolution"
    - "CrewAI v1.0 maturity"
    - "AutoGen v0.4+ API stability"
    - "New agent frameworks (DSPy, Claude Code SDK, etc.)"
    - "Anthropic tool use and computer use improvements"

domain_applicability:
  vascular_segmentation: 0.90
  cardiac_imaging: 0.75
  neuroimaging: 0.80
  general_medical: 0.80

rationale: >
  LangGraph (0.45, up from 0.40) is resolved-partial as the primary agent
  framework, strengthened by Phase 18 research showing alignment with the
  co-evolving agent pattern (TissueLab) and L2→L3 autonomy transition
  (Luo et al., 2026). L0-L5 data agent taxonomy maps current minivess at
  L2 (tool-assisted, human-orchestrated); target is L3 (autonomous pipeline
  orchestration). Custom (0.20, down from 0.25) has reduced prior as
  framework-level features (state persistence, HITL patterns) become more
  critical for L3 transition. CrewAI (0.20) is a simpler alternative for
  predefined multi-agent workflows. AutoGen (0.15) is viable but less
  aligned with the existing MONAI/LangChain stack. Phase 16 identified
  acquisition control and clinical contract verification; Phase 18 adds
  co-evolving segmentation agent and UQ-gated autonomy as core use cases.

references:
  - citation_key: langchain2024langgraph
    relevance: "LangGraph framework for stateful multi-actor agent applications with LLMs."
    supports_options: ["langgraph"]

  - citation_key: abdollahi2025agenticsurvey
    relevance: "Comprehensive survey on agentic AI systems covering architectures, patterns, and deployment."
    supports_options: ["langgraph", "crewai", "autogen", "custom"]

  - citation_key: bluethgen2025agenticradiology
    relevance: "Agentic systems in radiology. Demonstrates multi-agent patterns for clinical imaging workflows."
    supports_options: ["langgraph", "crewai"]

  - citation_key: tzanis2026agenticregulation
    relevance: "Regulatory implications for agentic AI systems. Highlights need for auditable agent state."
    supports_options: ["langgraph"]

  - citation_key: jiang2026ibisagent
    relevance: "IBISAgent reinforcing visual reasoning via interactive segmentation. Demonstrates agent-segmentation integration."
    supports_options: ["langgraph", "custom"]

  - citation_key: sheng2026dills
    relevance: "DiLLS layered summary approach for diagnosing LLM multi-agent systems. Relevant for agent observability."
    supports_options: ["langgraph"]

  - citation_key: luo2026dataagents
    relevance: "L0-L5 data agent autonomy taxonomy (SIGMOD 2026). Maps minivess at L2, target L3. LangGraph aligns with L3 graph-based orchestration."
    supports_options: ["langgraph"]

  - citation_key: zhu2025dataagents
    relevance: "Companion survey of data agents. Bottlenecks to L3: limited pipeline orchestration, incomplete lifecycle coverage."
    supports_options: ["langgraph", "custom"]

  - citation_key: tissuelab2025
    relevance: "TissueLab co-evolving agent: LLM orchestrator + local tool factories + active learning. Closest architecture to vascular MLOps agent."
    supports_options: ["langgraph"]

  - citation_key: rahman2025dsagents
    relevance: "Lifecycle-aligned agent taxonomy. >90% of surveyed agents lack trust/safety mechanisms — highlights governance need."
    supports_options: ["langgraph", "crewai", "autogen", "custom"]

  - citation_key: medbayes2025
    relevance: "MedBayes-Lite Bayesian UQ for agent confidence gating. UQ levels determine agent autonomy (auto vs. human-in-loop)."
    supports_options: ["langgraph"]

tags:
  - agents
  - langgraph
  - orchestration
  - llm
  - resolved-partial
